/* KindEditor 4.1.10 (2013-11-23), Copyright (C) kindsoft.net, Licence: http://www.kindsoft.net/license.php */(function(b,d){function f(a){if(!a)return!1;return Object.prototype.toString.call(a)==="[object Array]"}function j(a){if(!a)return!1;return Object.prototype.toString.call(a)==="[object Function]"}function e(a,c){for(var g=0,b=c.length;g<b;g++)if(a===c[g])return g;return-1}function h(a,c){if(f(a))for(var g=0,b=a.length;g<b;g++){if(c.call(a[g],g,a[g])===!1)break}else for(g in a)if(a.hasOwnProperty(g)&&c.call(a[g],g,a[g])===!1)break}function m(a){return a.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}
function n(a,c,g){g=g===d?",":g;return(g+c+g).indexOf(g+a+g)>=0}function o(a,c){c=c||"px";return a&&/^\d+$/.test(a)?a+c:a}function l(a){var c;return a&&(c=/(\d+)/.exec(a))?parseInt(c[1],10):0}function s(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function v(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function p(a){var c=a.split("-"),a="";h(c,function(c,b){a+=c>0?b.charAt(0).toUpperCase()+
b.substr(1):b});return a}function r(a){function c(a){a=parseInt(a,10).toString(16).toUpperCase();return a.length>1?a:"0"+a}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function(a,b,d,k){return"#"+c(b)+c(d)+c(k)})}function z(a,c){var c=c===d?",":c,g={},b=f(a)?a:a.split(c),t;h(b,function(a,c){if(t=/^(\d+)\.\.(\d+)$/.exec(c))for(var b=parseInt(t[1],10);b<=parseInt(t[2],10);b++)g[b.toString()]=!0;else g[c]=!0});return g}function D(a,c){return Array.prototype.slice.call(a,c||0)}function q(a,
c){return a===d?c:a}function A(a,c,g){g||(g=c,c=null);var b;if(c){var d=function(){};d.prototype=c.prototype;b=new d;h(g,function(a,c){b[a]=c})}else b=g;b.constructor=a;a.prototype=b;a.parent=c?c.prototype:null}function B(a){var c;if(c=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(a))a=c[0];c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));
if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");throw"JSON parse error";}function G(a,c,g){a.addEventListener?a.addEventListener(c,g,fb):a.attachEvent&&a.attachEvent("on"+c,g)}function C(a,c,g){a.removeEventListener?a.removeEventListener(c,g,fb):a.detachEvent&&a.detachEvent("on"+c,g)}function u(a,c){this.init(a,c)}function I(a){try{delete a[ma]}catch(c){a.removeAttribute&&
a.removeAttribute(ma)}}function E(a,c,g){if(c.indexOf(",")>=0)h(c.split(","),function(){E(a,this,g)});else{var b=a[ma]||null;b||(a[ma]=++gb,b=gb);L[b]===d&&(L[b]={});var t=L[b][c];t&&t.length>0?C(a,c,t[0]):(L[b][c]=[],L[b].el=a);t=L[b][c];t.length===0&&(t[0]=function(c){var g=c?new u(a,c):d;h(t,function(c,b){c>0&&b&&b.call(a,g)})});e(g,t)<0&&t.push(g);G(a,c,t[0])}}function T(a,c,g){if(c&&c.indexOf(",")>=0)h(c.split(","),function(){T(a,this,g)});else{var b=a[ma]||null;if(b)if(c===d)b in L&&(h(L[b],
function(c,g){c!="el"&&g.length>0&&C(a,c,g[0])}),delete L[b],I(a));else if(L[b]){var t=L[b][c];if(t&&t.length>0){g===d?(C(a,c,t[0]),delete L[b][c]):(h(t,function(a,c){a>0&&c===g&&t.splice(a,1)}),t.length==1&&(C(a,c,t[0]),delete L[b][c]));var k=0;h(L[b],function(){k++});k<2&&(delete L[b],I(a))}}}}function qa(a,c){if(c.indexOf(",")>=0)h(c.split(","),function(){qa(a,this)});else{var g=a[ma]||null;if(g){var b=L[g][c];if(L[g]&&b&&b.length>0)b[0]()}}}function $(a,c,g){c=/^\d{2,}$/.test(c)?c:c.toUpperCase().charCodeAt(0);
E(a,"keydown",function(b){b.ctrlKey&&b.which==c&&!b.shiftKey&&!b.altKey&&(g.call(a),b.stop())})}function M(a){for(var c={},g=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,b;b=g.exec(a);){var d=m(b[1].toLowerCase());b=m(r(b[2]));c[d]=b}return c}function K(a){for(var c={},g=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,b;b=g.exec(a);){var d=(b[1]||b[2]||b[4]||b[6]).toLowerCase();c[d]=(b[2]?b[3]:b[4]?b[5]:b[7])||""}return c}function O(a,c){return a=
/\s+class\s*=/.test(a)?a.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function(a,b,d,k){return(" "+d+" ").indexOf(" "+c+" ")<0?d===""?b+c+k:b+d+" "+c+k:a}):a.substr(0,a.length-1)+' class="'+c+'">'}function Q(a){var c="";h(M(a),function(a,b){c+=a+":"+b+";"});return c}function R(a,c,g,b){function t(a){for(var a=a.split("/"),c=[],g=0,b=a.length;g<b;g++){var d=a[g];d==".."?c.length>0&&c.pop():d!==""&&d!="."&&c.push(d)}return"/"+c.join("/")}function k(c,g){if(a.substr(0,c.length)===c){for(var d=[],t=
0;t<g;t++)d.push("..");t=".";d.length>0&&(t+="/"+d.join("/"));b=="/"&&(t+="/");return t+a.substr(c.length)}else if(i=/^(.*)\//.exec(c))return k(i[1],++g)}c=q(c,"").toLowerCase();a.substr(0,5)!="data:"&&(a=a.replace(/([^:])\/\//g,"$1/"));if(e(c,["absolute","relative","domain"])<0)return a;g=g||location.protocol+"//"+location.host;if(b===d)var w=location.pathname.match(/^(\/.*)\//),b=w?w[1]:"";var i;if(i=/^(\w+:\/\/[^\/]*)/.exec(a)){if(i[1]!==g)return a}else if(/^\w+:/.test(a))return a;/^\//.test(a)?
a=g+t(a.substr(1)):/^\w+:\/\//.test(a)||(a=g+t(b+"/"+a));c==="relative"?a=k(g+b,0).substr(2):c==="absolute"&&a.substr(0,g.length)===g&&(a=a.substr(g.length));return a}function H(a,c,g,b,d){a==null&&(a="");var g=g||"",b=q(b,!1),d=q(d,"\t"),k="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(a,c,g,b){return c+g.replace(/<(?:br|br\s[^>]*)>/ig,"\n")+b}),a=a.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/ig,"</p>"),a=a.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/ig,
"$1<br />$2"),a=a.replace(/\u200B/g,""),a=a.replace(/\u00A9/g,"&copy;"),a=a.replace(/\u00AE/g,"&reg;"),a=a.replace(/<[^>]+/g,function(a){return a.replace(/\s+/g," ")}),w={};c&&(h(c,function(a,c){for(var g=a.split(","),b=0,d=g.length;b<d;b++)w[g[b]]=z(c)}),w.script||(a=a.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/ig,"")),w.style||(a=a.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/ig,"")));var i=[],a=a.replace(/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,
function(a,f,n,l,o,j,s){var f=f||"",n=n||"",m=l.toLowerCase(),r=o||"",l=j?" "+j:"",s=s||"";if(c&&!w[m])return"";l===""&&hb[m]&&(l=" /");ib[m]&&(f&&(f=" "),s&&(s=" "));Ma[m]&&(n?s="\n":f="\n");b&&m=="br"&&(s="\n");if(jb[m]&&!Ma[m])if(b){n&&i.length>0&&i[i.length-1]===m?i.pop():i.push(m);s=f="\n";o=0;for(j=n?i.length:i.length-1;o<j;o++)f+=d,n||(s+=d);l?i.pop():n||(s+=d)}else f=s="";if(r!==""){var p=K(a);if(m==="font"){var v={},q="";h(p,function(a,c){if(a==="color")v.color=c,delete p[a];a==="size"&&
(v["font-size"]=k[parseInt(c,10)-1]||"",delete p[a]);a==="face"&&(v["font-family"]=c,delete p[a]);a==="style"&&(q=c)});q&&!/;$/.test(q)&&(q+=";");h(v,function(a,c){c!==""&&(/\s/.test(c)&&(c="'"+c+"'"),q+=a+":"+c+";")});p.style=q}h(p,function(a,b){Lb[a]&&(p[a]=a);e(a,["src","href"])>=0&&(p[a]=R(b,g));(c&&a!=="style"&&!w[m]["*"]&&!w[m][a]||m==="body"&&a==="contenteditable"||/^kindeditor_\d+$/.test(a))&&delete p[a];if(a==="style"&&b!==""){var d=M(b);h(d,function(a){c&&!w[m].style&&!w[m]["."+a]&&delete d[a]});
var V="";h(d,function(a,c){V+=a+":"+c+";"});p.style=V}});r="";h(p,function(a,c){a==="style"&&c===""||(c=c.replace(/"/g,"&quot;"),r+=" "+a+'="'+c+'"')})}m==="font"&&(m="span");return f+"<"+n+m+r+l+">"+s}),a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(a,c,g,b){return c+g.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+b}),a=a.replace(/\n\s*\n/g,"\n"),a=a.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n");return m(a)}function U(a,c){a=a.replace(/<meta[\s\S]*?>/ig,
"").replace(/<![\s\S]*?>/ig,"").replace(/<style[^>]*>[\s\S]*?<\/style>/ig,"").replace(/<script[^>]*>[\s\S]*?<\/script>/ig,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/ig,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/ig,"").replace(/<xml>[\s\S]*?<\/xml>/ig,"").replace(/<(?:table|td)[^>]*>/ig,function(a){return a.replace(/border-bottom:([#\w\s]+)/ig,"border:$1")});return H(a,c)}function W(a){if(/\.(rm|rmvb)(\?|$)/i.test(a))return"audio/x-pn-realaudio-plugin";if(/\.(swf|flv)(\?|$)/i.test(a))return"application/x-shockwave-flash";
return"video/x-ms-asf-plugin"}function S(a){return K(unescape(a))}function Na(a){var c="<embed ";h(a,function(a,b){c+=a+'="'+b+'" '});c+="/>";return c}function kb(a,c){var g=c.width,b=c.height,d=c.type||W(c.src),k=Na(c),w="";/\D/.test(g)?w+="width:"+g+";":g>0&&(w+="width:"+g+"px;");/\D/.test(b)?w+="height:"+b+";":b>0&&(w+="height:"+b+"px;");g=/realaudio/i.test(d)?"ke-rm":/flash/i.test(d)?"ke-flash":"ke-media";g='<img class="'+g+'" src="'+a+'" ';w!==""&&(g+='style="'+w+'" ');g+='data-ke-tag="'+escape(k)+
'" alt="" />';return g}function Da(a,c){if(a.nodeType==9&&c.nodeType!=9)return!0;for(;c=c.parentNode;)if(c==a)return!0;return!1}function Ea(a,c){var c=c.toLowerCase(),g=null;if(!Mb&&a.nodeName.toLowerCase()!="script"){var b=a.ownerDocument.createElement("div");b.appendChild(a.cloneNode(!1));b=K(v(b.innerHTML));c in b&&(g=b[c])}else try{g=a.getAttribute(c,2)}catch(d){g=a.getAttribute(c,1)}c==="style"&&g!==null&&(g=Q(g));return g}function Fa(a,c){function g(a){if(typeof a!="string")return a;return a.replace(/([^\w\-])/g,
"\\$1")}function b(a,c){return a==="*"||a.toLowerCase()===g(c.toLowerCase())}function d(a,c,g){var t=[];(a=(g.ownerDocument||g).getElementById(a.replace(/\\/g,"")))&&b(c,a.nodeName)&&Da(g,a)&&t.push(a);return t}function k(a,c,g){var d=g.ownerDocument||g,t=[],k,w,i;if(g.getElementsByClassName){d=g.getElementsByClassName(a.replace(/\\/g,""));k=0;for(w=d.length;k<w;k++)i=d[k],b(c,i.nodeName)&&t.push(i)}else if(d.querySelectorAll){d=d.querySelectorAll((g.nodeName!=="#document"?g.nodeName+" ":"")+c+"."+
a);k=0;for(w=d.length;k<w;k++)i=d[k],Da(g,i)&&t.push(i)}else{d=g.getElementsByTagName(c);a=" "+a+" ";k=0;for(w=d.length;k<w;k++)if(i=d[k],i.nodeType==1)(c=i.className)&&(" "+c+" ").indexOf(a)>-1&&t.push(i)}return t}function w(a,c,b,d){for(var t=[],b=d.getElementsByTagName(b),V=0,k=b.length;V<k;V++)d=b[V],d.nodeType==1&&(c===null?Ea(d,a)!==null&&t.push(d):c===g(Ea(d,a))&&t.push(d));return t}function i(a,c){var g=[],e,f=(e=/^((?:\\.|[^.#\s\[<>])+)/.exec(a))?e[1]:"*";if(e=/#((?:[\w\-]|\\.)+)$/.exec(a))g=
d(e[1],f,c);else if(e=/\.((?:[\w\-]|\\.)+)$/.exec(a))g=k(e[1],f,c);else if(e=/\[((?:[\w\-]|\\.)+)\]/.exec(a))g=w(e[1].toLowerCase(),null,f,c);else if(e=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(a)){g=e[1].toLowerCase();e=e[2];if(g==="id")f=d(e,f,c);else if(g==="class")f=k(e,f,c);else if(g==="name"){g=[];e=(c.ownerDocument||c).getElementsByName(e.replace(/\\/g,""));for(var Z,h=0,l=e.length;h<l;h++)Z=e[h],b(f,Z.nodeName)&&Da(c,Z)&&Z.getAttribute("name")!==null&&g.push(Z);f=g}else f=
w(g,e,f,c);g=f}else{f=c.getElementsByTagName(f);Z=0;for(h=f.length;Z<h;Z++)e=f[Z],e.nodeType==1&&g.push(e)}return g}var f=a.split(",");if(f.length>1){var n=[];h(f,function(){h(Fa(this,c),function(){e(this,n)<0&&n.push(this)})});return n}for(var c=c||document,f=[],l,o=/((?:\\.|[^\s>])+|[\s>])/g;l=o.exec(a);)l[1]!==" "&&f.push(l[1]);l=[];if(f.length==1)return i(f[0],c);var o=!1,m,s,j,r,p,v,q,B,E,u;v=0;for(lenth=f.length;v<lenth;v++)if(m=f[v],m===">")o=!0;else{if(v>0){s=[];q=0;for(E=l.length;q<E;q++){r=
l[q];j=i(m,r);B=0;for(u=j.length;B<u;B++)p=j[B],o?r===p.parentNode&&s.push(p):s.push(p)}l=s}else l=i(m,c);if(l.length===0)return[]}return l}function ia(a){if(!a)return document;return a.ownerDocument||a.document||a}function ja(a){if(!a)return b;a=ia(a);return a.parentWindow||a.defaultView}function Nb(a,c){if(a.nodeType==1){var g=ia(a);try{a.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+c;var b=g.getElementById("__kindeditor_temp_tag__");b.parentNode.removeChild(b)}catch(d){i(a).empty(),
i("@"+c,g).each(function(){a.appendChild(this)})}}}function Oa(a,c,g){F&&N<8&&c.toLowerCase()=="class"&&(c="className");a.setAttribute(c,""+g)}function Pa(a){if(!a||!a.nodeName)return"";return a.nodeName.toLowerCase()}function Ob(a,c){var g=ja(a),b=p(c),d="";g.getComputedStyle?(g=g.getComputedStyle(a,null),d=g[b]||g.getPropertyValue(c)||a.style[b]):a.currentStyle&&(d=a.currentStyle[b]||a.style[b]);return d}function X(a){a=a||document;return da?a.body:a.documentElement}function na(a){var a=a||document,
c;F||Pb||Qa?(c=X(a).scrollLeft,a=X(a).scrollTop):(c=ja(a).scrollX,a=ja(a).scrollY);return{x:c,y:a}}function P(a){this.init(a)}function lb(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;return a}function Ra(a,c,g){function b(d,t,V){var k=d.nodeValue.length,i;c&&(i=d.cloneNode(!0),i=t>0?i.splitText(t):i,V<k&&i.splitText(V-t));if(g){var w=d;t>0&&(w=d.splitText(t),a.setStart(d,t));V<k&&(d=w.splitText(V-t),a.setEnd(d,0));e.push(w)}return i}function d(){g&&a.up().collapse(!0);
for(var c=0,b=e.length;c<b;c++){var t=e[c];t.parentNode&&t.parentNode.removeChild(t)}}function k(d,t){for(var m=d.firstChild,s;m;){s=(new aa(i)).selectNode(m);h=s.compareBoundaryPoints(ra,a);h>=0&&l<=0&&(l=s.compareBoundaryPoints(sa,a));l>=0&&n<=0&&(n=s.compareBoundaryPoints(oa,a));n>=0&&o<=0&&(o=s.compareBoundaryPoints(ta,a));if(o>=0)return!1;s=m.nextSibling;if(h>0)if(m.nodeType==1)if(l>=0&&n<=0)c&&t.appendChild(m.cloneNode(!0)),g&&e.push(m);else{var j;c&&(j=m.cloneNode(!1),t.appendChild(j));if(k(m,
j)===!1)return!1}else if(m.nodeType==3&&(m=m==f.startContainer?b(m,f.startOffset,m.nodeValue.length):m==f.endContainer?b(m,0,f.endOffset):b(m,0,m.nodeValue.length),c))try{t.appendChild(m)}catch(r){}m=s}}var i=a.doc,e=[],f=a.cloneRange().down(),h=-1,l=-1,n=-1,o=-1,m=a.commonAncestor(),s=i.createDocumentFragment();if(m.nodeType==3)return m=b(m,a.startOffset,a.endOffset),c&&s.appendChild(m),d(),c?s:a;k(m,s);g&&a.up().collapse(!0);for(var m=0,j=e.length;m<j;m++){var r=e[m];r.parentNode&&r.parentNode.removeChild(r)}return c?
s:a}function ua(a,c){for(var g=c;g;){var b=i(g);if(b.name=="marquee"||b.name=="select")return;g=g.parentNode}try{a.moveToElementText(c)}catch(d){}}function mb(a,c){var g=a.parentElement().ownerDocument,b=a.duplicate();b.collapse(c);var d=b.parentElement(),k=d.childNodes;if(k.length===0)return{node:d.parentNode,offset:i(d).index()};var w=g,e=0,f=-1,h=a.duplicate();ua(h,d);for(var l=0,n=k.length;l<n;l++){var o=k[l],f=h.compareEndPoints("StartToStart",b);if(f===0)return{node:o.parentNode,offset:l};if(o.nodeType==
1){var m=a.duplicate(),s,j=i(o),r=o;j.isControl()&&(s=g.createElement("span"),j.after(s),r=s,e+=j.text().replace(/\r\n|\n|\r/g,"").length);ua(m,r);h.setEndPoint("StartToEnd",m);f>0?e+=m.text.replace(/\r\n|\n|\r/g,"").length:e=0;s&&i(s).remove()}else o.nodeType==3&&(h.moveStart("character",o.nodeValue.length),e+=o.nodeValue.length);f<0&&(w=o)}if(f<0&&w.nodeType==1)return{node:d,offset:i(d.lastChild).index()+1};if(f>0)for(;w.nextSibling&&w.nodeType==1;)w=w.nextSibling;h=a.duplicate();ua(h,d);h.setEndPoint("StartToEnd",
b);e-=h.text.replace(/\r\n|\n|\r/g,"").length;if(f>0&&w.nodeType==3)for(g=w.previousSibling;g&&g.nodeType==3;)e-=g.nodeValue.length,g=g.previousSibling;return{node:w,offset:e}}function nb(a,c){var g=a.ownerDocument||a,b=g.body.createTextRange();if(g==a)return b.collapse(!0),b;if(a.nodeType==1&&a.childNodes.length>0){var d=a.childNodes,k;c===0?(k=d[0],d=!0):(k=d[c-1],d=!1);if(!k)return b;if(i(k).name==="head")return c===1&&(d=!0),c===2&&(d=!1),b.collapse(d),b;if(k.nodeType==1){var w=i(k),e;w.isControl()&&
(e=g.createElement("span"),d?w.before(e):w.after(e),k=e);ua(b,k);b.collapse(d);e&&i(e).remove();return b}a=k;c=d?0:k.nodeValue.length}g=g.createElement("span");i(a).before(g);ua(b,g);b.moveStart("character",c);i(g).remove();return b}function ob(a){function c(a){if(i(a.node).name=="tr")a.node=a.node.cells[a.offset],a.offset=0}var g;if(Y){if(a.item)return g=ia(a.item(0)),g=new aa(g),g.selectNode(a.item(0)),g;g=a.parentElement().ownerDocument;var b=mb(a,!0),a=mb(a,!1);c(b);c(a);g=new aa(g);g.setStart(b.node,
b.offset);g.setEnd(a.node,a.offset);return g}b=a.startContainer;g=b.ownerDocument||b;g=new aa(g);g.setStart(b,a.startOffset);g.setEnd(a.endContainer,a.endOffset);return g}function aa(a){this.init(a)}function Sa(a){if(!a.nodeName)return a.constructor===aa?a:ob(a);return new aa(a)}function ea(a,c,g){try{a.execCommand(c,!1,g)}catch(b){}}function pb(a,c){var g="";try{g=a.queryCommandValue(c)}catch(b){}typeof g!=="string"&&(g="");return g}function Ta(a){var c=ja(a);return Y?a.selection:c.getSelection()}
function qb(a){var c={},g,b;h(a,function(a,d){g=a.split(",");for(var i=0,e=g.length;i<e;i++)b=g[i],c[b]=d});return c}function Ua(a,c){return rb(a,c,"*")||rb(a,c)}function rb(a,c,g){g=g||a.name;if(a.type!==1)return!1;c=qb(c);if(!c[g])return!1;for(var g=c[g].split(","),c=0,b=g.length;c<b;c++){var d=g[c];if(d==="*")return!0;var k=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(d),i=k[1]?"css":"attr",d=k[2],k=k[3]||"";if(k===""&&a[i](d)!=="")return!0;if(k!==""&&a[i](d)===k)return!0}return!1}function Va(a,c){a.type==
1&&(sb(a,c,"*"),sb(a,c))}function sb(a,c,g){g=g||a.name;if(a.type===1&&(c=qb(c),c[g])){for(var g=c[g].split(","),c=!1,b=0,d=g.length;b<d;b++){var k=g[b];if(k==="*"){c=!0;break}var i=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(k),k=i[2];i[1]?(k=p(k),a[0].style[k]&&(a[0].style[k]="")):a.removeAttr(k)}c&&a.remove(!0)}}function Wa(a){for(;a.first();)a=a.first();return a}function pa(a){if(a.type!=1||a.isSingle())return!1;return a.html().replace(/<[^>]+>/g,"")===""}function Qb(a,c,g){h(c,function(c,g){c!=="style"&&
a.attr(c,g)});h(g,function(c,g){a.css(c,g)})}function va(a){this.init(a)}function tb(a){a.nodeName&&(a=ia(a),a=Sa(a).selectNodeContents(a.body).collapse(!1));return new va(a)}function Xa(a){var c=a.moveEl,g=a.moveFn,b=a.clickEl||c,t=a.beforeDrag,k=[document];(a.iframeFix===d||a.iframeFix)&&i("iframe").each(function(){if(!/^https?:\/\//.test(R(this.src||"","absolute"))){var a;try{a=Ya(this)}catch(c){}if(a){var g=i(this).pos();i(a).data("pos-x",g.x);i(a).data("pos-y",g.y);k.push(a)}}});b.mousedown(function(a){function d(a){a.preventDefault();
var c=i(ia(a.target)),t=fa((c.data("pos-x")||0)+a.pageX-j),a=fa((c.data("pos-y")||0)+a.pageY-r);g.call(b,n,o,m,s,t,a)}function e(a){a.preventDefault()}function f(a){a.preventDefault();i(k).unbind("mousemove",d).unbind("mouseup",f).unbind("selectstart",e);h.releaseCapture&&h.releaseCapture()}a.stopPropagation();var h=b.get(),n=l(c.css("left")),o=l(c.css("top")),m=c.width(),s=c.height(),j=a.pageX,r=a.pageY;t&&t();i(k).mousemove(d).mouseup(f).bind("selectstart",e);h.setCapture&&h.setCapture()})}function ga(a){this.init(a)}
function Za(a){return new ga(a)}function Ya(a){a=i(a)[0];return a.contentDocument||a.contentWindow.document}function Rb(a,c,g,b){var d=[$a===""?"<html>":'<html dir="'+$a+'">','<head><meta charset="utf-8" /><title></title>',"<style>","html {margin:0;padding:0;}","body {margin:0;padding:5px;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}",
"img.ke-flash {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/flash.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-rm {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/rm.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-media {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/media.gif);","\tbackground-position:center center;",
"\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-anchor {","\tborder:1px dashed #666;","\twidth:16px;","\theight:16px;","}",".ke-script, .ke-noscript, .ke-display-none {","\tdisplay:none;","\tfont-size:0;","\twidth:0;","\theight:0;","}",".ke-pagebreak {","\tborder:1px dotted #AAA;","\tfont-size:0;","\theight:2px;","}","</style>"];f(g)||(g=[g]);h(g,function(a,c){c&&d.push('<link href="'+c+'" rel="stylesheet" />')});b&&d.push("<style>"+b+"</style>");d.push("</head><body "+
(c?'class="'+c+'"':"")+"></body></html>");return d.join("\n")}function wa(a,c){if(a.hasVal()){if(c===d){var g=a.val();return g=g.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/ig,"")}return a.val(c)}return a.html(c)}function xa(a){this.init(a)}function ub(a){return new xa(a)}function vb(a,c){var g=this.get(a);g&&!g.hasClass("ke-disabled")&&c(g)}function Ga(a){this.init(a)}function wb(a){return new Ga(a)}function ya(a){this.init(a)}function ab(a){return new ya(a)}function za(a){this.init(a)}function xb(a){return new za(a)}
function bb(a){this.init(a)}function Aa(a){this.init(a)}function yb(a){return new Aa(a)}function cb(a,c){var g=document.getElementsByTagName("head")[0]||(da?document.body:document.documentElement),b=document.createElement("script");g.appendChild(b);b.src=a;b.charset="utf-8";b.onload=b.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded")c&&c(),b.onload=b.onreadystatechange=null,g.removeChild(b)}}function zb(a){var c=a.indexOf("?");return c>0?a.substr(0,c):a}function db(a){for(var c=
document.getElementsByTagName("head")[0]||(da?document.body:document.documentElement),g=document.createElement("link"),b=zb(R(a,"absolute")),d=i('link[rel="stylesheet"]',c),k=0,w=d.length;k<w;k++)if(zb(R(d[k].href,"absolute"))===b)return;c.appendChild(g);g.href=a;g.rel="stylesheet"}function Ab(a,c){if(a===d)return ba;if(!c)return ba[a];ba[a]=c}function Bb(a){var c,g="core";if(c=/^(\w+)\.(\w+)$/.exec(a))g=c[1],a=c[2];return{ns:g,key:a}}function Cb(a,c){c=c===d?i.options.langType:c;if(typeof a==="string"){if(!ca[c])return"no language";
var g=a.length-1;if(a.substr(g)===".")return ca[c][a.substr(0,g)];g=Bb(a);return ca[c][g.ns][g.key]}h(a,function(a,g){var b=Bb(a);ca[c]||(ca[c]={});ca[c][b.ns]||(ca[c][b.ns]={});ca[c][b.ns][b.key]=g})}function Ha(a,c){if(!a.collapsed){var a=a.cloneRange().up(),g=a.startContainer,b=a.startOffset;if(ka||a.isControl())if((g=i(g.childNodes[b]))&&g.name=="img"&&c(g))return g}}function Sb(){var a=this;i(a.edit.doc).contextmenu(function(c){a.menu&&a.hideMenu();if(a.useContextmenu){if(a._contextmenus.length!==
0){var g=0,b=[];for(h(a._contextmenus,function(){if(this.title=="-")b.push(this);else if(this.cond&&this.cond()&&(b.push(this),this.width&&this.width>g))g=this.width});b.length>0&&b[0].title=="-";)b.shift();for(;b.length>0&&b[b.length-1].title=="-";)b.pop();var d=null;h(b,function(a){this.title=="-"&&d.title=="-"&&delete b[a];d=this});if(b.length>0){c.preventDefault();var k=i(a.edit.iframe).pos(),w=ab({x:k.x+c.clientX,y:k.y+c.clientY,width:g,css:{visibility:"hidden"},shadowMode:a.shadowMode});h(b,
function(){this.title&&w.addItem(this)});var k=X(w.doc),e=w.div.height();c.clientY+e>=k.clientHeight-100&&w.pos(w.x,l(w.y)-e);w.div.css("visibility","visible");a.menu=w}}}else c.preventDefault()})}function Tb(){function a(a){for(a=i(a.commonAncestor());a;){if(a.type==1&&!a.isStyle())break;a=a.parent()}return a.name}var c=this,g=c.edit.doc,b=c.newlineTag;if(!(F&&b!=="br")&&(!la||!(N<3&&b!=="p"))&&!(Qa&&N<9)){var d=z("h1,h2,h3,h4,h5,h6,pre,li"),k=z("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");i(g).keydown(function(i){if(!(i.which!=
13||i.shiftKey||i.ctrlKey||i.altKey)){c.cmd.selection();var e=a(c.cmd.range);e=="marquee"||e=="select"||(b==="br"&&!d[e]?(i.preventDefault(),c.insertHtml("<br />"+(F&&N<9?"":"\u200b"))):k[e]||ea(g,"formatblock","<p>"))}});i(g).keyup(function(d){if(!(d.which!=13||d.shiftKey||d.ctrlKey||d.altKey)&&b!="br")if(la){var d=c.cmd.commonAncestor("p"),t=c.cmd.commonAncestor("a");t&&t.text()==""&&(t.remove(!0),c.cmd.range.selectNodeContents(d[0]).collapse(!0),c.cmd.select())}else if(c.cmd.selection(),d=a(c.cmd.range),
!(d=="marquee"||d=="select"))if(k[d]||ea(g,"formatblock","<p>"),d=c.cmd.commonAncestor("div")){for(var t=i("<p></p>"),e=d[0].firstChild;e;){var f=e.nextSibling;t.append(e);e=f}d.before(t);d.remove();c.cmd.range.selectNodeContents(t[0]);c.cmd.select()}})}}function Ub(){var a=this,c=a.edit.doc;i(c).keydown(function(g){if(g.which==9)if(g.preventDefault(),a.afterTab)a.afterTab.call(a,g);else{var g=a.cmd,b=g.range;b.shrink();b.collapsed&&b.startContainer.nodeType==1&&(b.insertNode(i("@&nbsp;",c)[0]),g.select());
a.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}})}function Vb(){var a=this;i(a.edit.textarea[0],a.edit.win).focus(function(c){a.afterFocus&&a.afterFocus.call(a,c)}).blur(function(c){a.afterBlur&&a.afterBlur.call(a,c)})}function ha(a){return m(a.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/ig,""))}function Ia(a){return a.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/ig,"")}function Db(a,c){if(a.length===0)a.push(c);else{var g=a[a.length-1];ha(c.html)!==
ha(g.html)&&a.push(c)}}function Eb(a,c){var g=this.edit,b=g.doc.body,d,k;if(a.length===0)return this;g.designMode?(d=this.cmd.range,k=d.createBookmark(!0),k.html=b.innerHTML):k={html:b.innerHTML};Db(c,k);var e=a.pop();ha(k.html)===ha(e.html)&&a.length>0&&(e=a.pop());g.designMode?(g.html(e.html),e.start&&(d.moveToBookmark(e),this.select())):i(b).html(ha(e.html));return this}function Ba(a){function c(a,c){Ba.prototype[a]===d&&(g[a]=c);g.options[a]=c}var g=this;g.options={};h(a,function(g){c(g,a[g])});
h(i.options,function(a,b){g[a]===d&&c(a,b)});var b=i(g.srcElement||"<textarea/>");if(!g.width)g.width=b[0].style.width||b.width();if(!g.height)g.height=b[0].style.height||b.height();c("width",q(g.width,g.minWidth));c("height",q(g.height,g.minHeight));c("width",o(g.width));c("height",o(g.height));if(Wb&&(!Xb||N<534))g.designMode=!1;g.srcElement=b;g.initContent="";g.plugin={};g.isCreated=!1;g._handlers={};g._contextmenus=[];g._undoStack=[];g._redoStack=[];g._firstAddBookmark=!0;g.menu=g.contextmenu=
null;g.dialogs=[]}function Fb(a,c){function g(a){h(ba,function(c,g){j(g)&&g.call(a,KindEditor)});return a.create()}c=c||{};c.basePath=q(c.basePath,i.basePath);c.themesPath=q(c.themesPath,c.basePath+"themes/");c.langPath=q(c.langPath,c.basePath+"lang/");c.pluginsPath=q(c.pluginsPath,c.basePath+"plugins/");if(q(c.loadStyleMode,i.options.loadStyleMode)){var b=q(c.themeType,i.options.themeType);db(c.themesPath+"default/default.css");db(c.themesPath+b+"/"+b+".css")}if((b=i(a))&&b.length!==0){if(b.length>
1)return b.each(function(){Fb(this,c)}),_instances[0];c.srcElement=b[0];var d=new Ba(c);_instances.push(d);if(ca[d.langType])return g(d);cb(d.langPath+d.langType+".js?ver="+encodeURIComponent(i.DEBUG?Ja:Ka),function(){g(d)});return d}}function Ca(a,c){i(a).each(function(a,b){i.each(_instances,function(a,g){if(g&&g.srcElement[0]==b)return c.call(g,a),!1})})}if(!b.KindEditor){if(!b.console)b.console={};if(!console.log)console.log=function(){};var Ka="4.1.10 (2013-11-23)",J=navigator.userAgent.toLowerCase(),
F=J.indexOf("msie")>-1&&J.indexOf("opera")==-1,Pb=J.indexOf("msie")==-1&&J.indexOf("trident")>-1,la=J.indexOf("gecko")>-1&&J.indexOf("khtml")==-1,ka=J.indexOf("applewebkit")>-1,Qa=J.indexOf("opera")>-1,Wb=J.indexOf("mobile")>-1,Xb=/ipad|iphone|ipod/.test(J),da=document.compatMode!="CSS1Compat",Y=!b.getSelection,N=(J=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(J))?J[1]:"0",Ja=(new Date).getTime(),fa=Math.round,i={DEBUG:!1,VERSION:Ka,IE:F,GECKO:la,WEBKIT:ka,OPERA:Qa,V:N,TIME:Ja,each:h,isArray:f,
isFunction:j,inArray:e,inString:n,trim:m,addUnit:o,removeUnit:l,escape:s,unescape:v,toCamel:p,toHex:r,toMap:z,toArray:D,undef:q,invalidUrl:function(a){return!a||/[<>"]/.test(a)},addParam:function(a,c){return a.indexOf("?")>=0?a+"&"+c:a+"?"+c},extend:A,json:B},ib=z("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),jb=z("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul"),
hb=z("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),Gb=z("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),Yb=z("img,table,input,textarea,button"),Ma=z("pre,style,script"),La=z("html,head,body,td,tr,table,ol,ul,li");z("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var Lb=z("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),Hb=z("input,button,textarea,select");i.basePath=function(){for(var a=
document.getElementsByTagName("script"),c,g=0,b=a.length;g<b;g++)if(c=a[g].src||"",/kindeditor[\w\-\.]*\.js/.test(c))return c.substring(0,c.lastIndexOf("/")+1);return""}();i.options={designMode:!0,fullscreenMode:!1,filterMode:!0,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,basePath:i.basePath,themesPath:i.basePath+"themes/",langPath:i.basePath+"lang/",pluginsPath:i.basePath+"plugins/",themeType:"default",langType:"zh_CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",
useContextmenu:!0,fullscreenShortcut:!1,bodyClass:"ke-content",indentChar:"\t",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:50,zIndex:811213,items:["source","|","undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock",
"fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","multiimage","flash","media","insertfile","table","hr","emoticons","baidumap","pagebreak","anchor","link","unlink","|","about"],noDisableItems:["source","fullscreen"],colorTable:[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],
["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],fontSizeTable:["9px","10px","12px","14px","16px","18px","24px","32px"],htmlTags:{font:["id","class","color","size","face",".background-color"],span:["id","class",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".line-height"],div:["id","class","align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",
".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["id","class","border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height",".border-collapse"],"td,th":["id","class","align","valign","width","height","colspan","rowspan","bgcolor",".text-align",
".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background",".border"],a:["id","class","href","target","name"],embed:["id","class","src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["id","class","src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["id","class","align",".text-align",".color",
".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["id","class"],hr:["id","class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:["id","class","src","frameborder","width","height",".width",".height"]},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var fb=!1,Ib=z("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),
J=z("33..40"),eb={};h(Ib,function(a,c){eb[a]=c});h(J,function(a,c){eb[a]=c});var Zb="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(",");A(u,{init:function(a,c){var g=this,b=a.ownerDocument||a.document||a;g.event=c;h(Zb,
function(a,b){g[b]=c[b]});if(!g.target)g.target=g.srcElement||b;if(g.target.nodeType===3)g.target=g.target.parentNode;if(!g.relatedTarget&&g.fromElement)g.relatedTarget=g.fromElement===g.target?g.toElement:g.fromElement;if(g.pageX==null&&g.clientX!=null){var t=b.documentElement,b=b.body;g.pageX=g.clientX+(t&&t.scrollLeft||b&&b.scrollLeft||0)-(t&&t.clientLeft||b&&b.clientLeft||0);g.pageY=g.clientY+(t&&t.scrollTop||b&&b.scrollTop||0)-(t&&t.clientTop||b&&b.clientTop||0)}if(!g.which&&(g.charCode||g.charCode===
0?g.charCode:g.keyCode))g.which=g.charCode||g.keyCode;if(!g.metaKey&&g.ctrlKey)g.metaKey=g.ctrlKey;if(!g.which&&g.button!==d)g.which=g.button&1?1:g.button&2?3:g.button&4?2:0;switch(g.which){case 186:g.which=59;break;case 187:case 107:case 43:g.which=61;break;case 189:case 45:g.which=109;break;case 42:g.which=106;break;case 47:g.which=111;break;case 78:g.which=110}g.which>=96&&g.which<=105&&(g.which-=48)},preventDefault:function(){var a=this.event;a.preventDefault?a.preventDefault():a.returnValue=
!1},stopPropagation:function(){var a=this.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},stop:function(){this.preventDefault();this.stopPropagation()}});var ma="kindeditor_"+Ja,gb=0,L={},Jb=!1;F&&b.attachEvent("onunload",function(){h(L,function(a,c){c.el&&T(c.el)})});i.ctrl=$;i.ready=function(a){function c(){t||(t=!0,a(KindEditor),Jb=!0)}function g(){if(!t){try{document.documentElement.doScroll("left")}catch(a){setTimeout(g,100);return}c()}}function d(){document.readyState==="complete"&&
c()}if(Jb)a(KindEditor);else{var t=!1;if(document.addEventListener)E(document,"DOMContentLoaded",c);else if(document.attachEvent){E(document,"readystatechange",d);var k=!1;try{k=b.frameElement==null}catch(i){}document.documentElement.doScroll&&k&&g()}E(b,"load",c)}};i.formatUrl=R;i.formatHtml=H;i.getCssList=M;i.getAttrList=K;i.mediaType=W;i.mediaAttrs=S;i.mediaEmbed=Na;i.mediaImg=kb;i.clearMsWord=U;i.tmpl=function(a,c){var g=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+
a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return c?g(c):g};J=document.createElement("div");J.setAttribute("className","t");var Mb=J.className!=="t";i.query=function(a,c){var g=Fa(a,c);return g.length>0?g[0]:null};i.queryAll=Fa;A(P,{init:function(a){for(var a=f(a)?a:[a],c=0,g=0,b=a.length;g<b;g++)a[g]&&(this[g]=a[g].constructor===
P?a[g][0]:a[g],c++);this.length=c;this.doc=ia(this[0]);this.name=Pa(this[0]);this.type=this.length>0?this[0].nodeType:null;this.win=ja(this[0])},each:function(a){for(var c=0;c<this.length;c++)if(a.call(this[c],c,this[c])===!1)break;return this},bind:function(a,c){this.each(function(){E(this,a,c)});return this},unbind:function(a,c){this.each(function(){T(this,a,c)});return this},fire:function(a){if(this.length<1)return this;qa(this[0],a);return this},hasAttr:function(a){if(this.length<1)return!1;return!!Ea(this[0],
a)},attr:function(a,c){var g=this;if(a===d)return K(g.outer());if(typeof a==="object")return h(a,function(a,c){g.attr(a,c)}),g;if(c===d)return c=g.length<1?null:Ea(g[0],a),c===null?"":c;g.each(function(){Oa(this,a,c)});return g},removeAttr:function(a){this.each(function(){var c=a;F&&N<8&&c.toLowerCase()=="class"&&(c="className");Oa(this,c,"");this.removeAttribute(c)});return this},get:function(a){if(this.length<1)return null;return this[a||0]},eq:function(a){if(this.length<1)return null;return this[a]?
new P(this[a]):null},hasClass:function(a){if(this.length<1)return!1;return n(a,this[0].className," ")},addClass:function(a){this.each(function(){if(!n(a,this.className," "))this.className=m(this.className+" "+a)});return this},removeClass:function(a){this.each(function(){if(n(a,this.className," "))this.className=m(this.className.replace(RegExp("(^|\\s)"+a+"(\\s|$)")," "))});return this},html:function(a){if(a===d){if(this.length<1||this.type!=1)return"";return H(this[0].innerHTML)}this.each(function(){Nb(this,
a)});return this},text:function(){if(this.length<1)return"";return F?this[0].innerText:this[0].textContent},hasVal:function(){if(this.length<1)return!1;return!!Hb[Pa(this[0])]},val:function(a){if(a===d){if(this.length<1)return"";return this.hasVal()?this[0].value:this.attr("value")}else return this.each(function(){Hb[Pa(this)]?this.value=a:Oa(this,"value",a)}),this},css:function(a,c){var g=this;if(a===d)return M(g.attr("style"));if(typeof a==="object")return h(a,function(a,c){g.css(a,c)}),g;if(c===
d){if(g.length<1)return"";return g[0].style[p(a)]||Ob(g[0],a)||""}g.each(function(){this.style[p(a)]=c});return g},width:function(a){if(a===d){if(this.length<1)return 0;return this[0].offsetWidth}return this.css("width",o(a))},height:function(a){if(a===d){if(this.length<1)return 0;return this[0].offsetHeight}return this.css("height",o(a))},opacity:function(a){this.each(function(){this.style.opacity===d?this.style.filter=a==1?"":"alpha(opacity="+a*100+")":this.style.opacity=a==1?"":a});return this},
data:function(a,c){a="kindeditor_data_"+a;if(c===d){if(this.length<1)return null;return this[0][a]}this.each(function(){this[a]=c});return this},pos:function(){var a=this[0],c=0,g=0;if(a)if(a.getBoundingClientRect)a=a.getBoundingClientRect(),g=na(this.doc),c=a.left+g.x,g=a.top+g.y;else for(;a;)c+=a.offsetLeft,g+=a.offsetTop,a=a.offsetParent;return{x:fa(c),y:fa(g)}},clone:function(a){if(this.length<1)return new P([]);return new P(this[0].cloneNode(a))},append:function(a){this.each(function(){this.appendChild&&
this.appendChild(i(a)[0])});return this},appendTo:function(a){this.each(function(){i(a)[0].appendChild(this)});return this},before:function(a){this.each(function(){this.parentNode.insertBefore(i(a)[0],this)});return this},after:function(a){this.each(function(){this.nextSibling?this.parentNode.insertBefore(i(a)[0],this.nextSibling):this.parentNode.appendChild(i(a)[0])});return this},replaceWith:function(a){var c=[];this.each(function(g,b){T(b);var d=i(a)[0];b.parentNode.replaceChild(d,b);c.push(d)});
return i(c)},empty:function(){this.each(function(a,c){for(var b=c.firstChild;b;){if(!c.parentNode)break;var d=b.nextSibling;b.parentNode.removeChild(b);b=d}});return this},remove:function(a){var c=this;c.each(function(b,d){if(d.parentNode){T(d);if(a)for(var i=d.firstChild;i;){var k=i.nextSibling;d.parentNode.insertBefore(i,d);i=k}d.parentNode.removeChild(d);delete c[b]}});c.length=0;return c},show:function(a){a===d&&(a=this._originDisplay||"");if(this.css("display")!="none")return this;return this.css("display",
a)},hide:function(){if(this.length<1)return this;this._originDisplay=this[0].style.display;return this.css("display","none")},outer:function(){if(this.length<1)return"";var a=this.doc.createElement("div");a.appendChild(this[0].cloneNode(!0));return H(a.innerHTML)},isSingle:function(){return!!hb[this.name]},isInline:function(){return!!ib[this.name]},isBlock:function(){return!!jb[this.name]},isStyle:function(){return!!Gb[this.name]},isControl:function(){return!!Yb[this.name]},contains:function(a){if(this.length<
1)return!1;return Da(this[0],i(a)[0])},parent:function(){if(this.length<1)return null;var a=this[0].parentNode;return a?new P(a):null},children:function(){if(this.length<1)return new P([]);for(var a=[],c=this[0].firstChild;c;)(c.nodeType!=3||m(c.nodeValue)!=="")&&a.push(c),c=c.nextSibling;return new P(a)},first:function(){var a=this.children();return a.length>0?a.eq(0):null},last:function(){var a=this.children();return a.length>0?a.eq(a.length-1):null},index:function(){if(this.length<1)return-1;for(var a=
-1,c=this[0];c;)a++,c=c.previousSibling;return a},prev:function(){if(this.length<1)return null;var a=this[0].previousSibling;return a?new P(a):null},next:function(){if(this.length<1)return null;var a=this[0].nextSibling;return a?new P(a):null},scan:function(a,c){function b(d){for(d=c?d.firstChild:d.lastChild;d;){var i=c?d.nextSibling:d.previousSibling;if(a(d)===!1)return!1;if(b(d)===!1)return!1;d=i}}if(!(this.length<1))return c=c===d?!0:c,b(this[0]),this}});h("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),
function(a,c){P.prototype[c]=function(a){return a?this.bind(c,a):this.fire(c)}});J=i;i=function(a,c){function b(a){a[0]||(a=[]);return new P(a)}if(!(a===d||a===null)){if(typeof a==="string"){c&&(c=i(c)[0]);var e=a.length;a.charAt(0)==="@"&&(a=a.substr(1));if(a.length!==e||/<.+>/.test(a)){var e=(c?c.ownerDocument||c:document).createElement("div"),t=[];e.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+a;for(var k=0,w=e.childNodes.length;k<w;k++){var h=e.childNodes[k];
h.id!="__kindeditor_temp_tag__"&&t.push(h)}return b(t)}return b(Fa(a,c))}if(a&&a.constructor===P)return a;a.toArray&&(a=a.toArray());if(f(a))return b(a);return b(D(arguments))}};h(J,function(a,c){i[a]=c});i.NodeClass=P;b.KindEditor=i;var sa=0,ra=1,oa=2,ta=3,Kb=0;A(aa,{init:function(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this.collapsed=!0;this.doc=a},commonAncestor:function(){function a(a){for(var c=[];a;)c.push(a),a=a.parentNode;return c}for(var c=a(this.startContainer),
b=a(this.endContainer),d=0,i=c.length,k=b.length,e,f;++d;)if(e=c[i-d],f=b[k-d],!e||!f||e!==f)break;return c[i-d+1]},setStart:function(a,c){var b=this.doc;this.startContainer=a;this.startOffset=c;if(this.endContainer===b)this.endContainer=a,this.endOffset=c;return lb(this)},setEnd:function(a,c){var b=this.doc;this.endContainer=a;this.endOffset=c;if(this.startContainer===b)this.startContainer=a,this.startOffset=c;return lb(this)},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,
i(a).index())},setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,i(a).index()+1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,i(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||this.doc,i(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){var c=i(a);if(c.type==3||c.isSingle())return this.selectNode(a);c=c.children();if(c.length>0)return this.setStartBefore(c[0]).setEndAfter(c[c.length-
1]);return this.setStart(a,0).setEnd(a,0)},collapse:function(a){if(a)return this.setEnd(this.startContainer,this.startOffset);return this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,c){var b=this.get(),d=c.get();if(Y){var t={};t[sa]="StartToStart";t[ra]="EndToStart";t[oa]="EndToEnd";t[ta]="StartToEnd";b=b.compareEndPoints(t[a],d);if(b!==0)return b;var k,e,f,h;if(a===sa||a===ta)k=this.startContainer,f=this.startOffset;if(a===ra||a===oa)k=this.endContainer,f=this.endOffset;
if(a===sa||a===ra)e=c.startContainer,h=c.startOffset;if(a===oa||a===ta)e=c.endContainer,h=c.endOffset;if(k===e)return k=f-h,k>0?1:k<0?-1:0;for(b=e;b&&b.parentNode!==k;)b=b.parentNode;if(b)return i(b).index()>=f?-1:1;for(b=k;b&&b.parentNode!==e;)b=b.parentNode;if(b)return i(b).index()>=h?1:-1;if((b=i(e).next())&&b.contains(k))return 1;if((b=i(k).next())&&b.contains(e))return-1}else return b.compareBoundaryPoints(a,d)},cloneRange:function(){return(new aa(this.doc)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,
this.endOffset)},toString:function(){var a=this.get();return(Y?a.text:a.toString()).replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return Ra(this,!0,!1)},deleteContents:function(){return Ra(this,!1,!0)},extractContents:function(){return Ra(this,!0,!0)},insertNode:function(a){var c=this.startContainer,b=this.startOffset,d=this.endContainer,i=this.endOffset,k,e,f,h=1;if(a.nodeName.toLowerCase()==="#document-fragment")k=a.firstChild,e=a.lastChild,h=a.childNodes.length;c.nodeType==1?(f=c.childNodes[b])?
(c.insertBefore(a,f),c===d&&(i+=h)):c.appendChild(a):c.nodeType==3&&(b===0?(c.parentNode.insertBefore(a,c),c.parentNode===d&&(i+=h)):b>=c.nodeValue.length?c.nextSibling?c.parentNode.insertBefore(a,c.nextSibling):c.parentNode.appendChild(a):(f=b>0?c.splitText(b):c,c.parentNode.insertBefore(a,f),c===d&&(d=f,i-=b)));k?this.setStartBefore(k).setEndAfter(e):this.selectNode(a);if(this.compareBoundaryPoints(oa,this.cloneRange().setEnd(d,i))>=1)return this;return this.setEnd(d,i)},surroundContents:function(a){a.appendChild(this.extractContents());
return this.insertNode(a).selectNode(a)},isControl:function(){var a=this.startContainer,c=this.startOffset,b=this.endContainer,d=this.endOffset;return a.nodeType==1&&a===b&&c+1===d&&i(a.childNodes[c]).isControl()},get:function(a){var c=this.doc;if(!Y){c=c.createRange();try{c.setStart(this.startContainer,this.startOffset),c.setEnd(this.endContainer,this.endOffset)}catch(b){}return c}if(a&&this.isControl())return c=c.body.createControlRange(),c.addElement(this.startContainer.childNodes[this.startOffset]),
c;a=this.cloneRange().down();c=c.body.createTextRange();c.setEndPoint("StartToStart",nb(a.startContainer,a.startOffset));c.setEndPoint("EndToStart",nb(a.endContainer,a.endOffset));return c},html:function(){return i(this.cloneContents()).outer()},down:function(){function a(a,b,d){if(a.nodeType==1&&(a=i(a).children(),a.length!==0)){var k,e,f,h;b>0&&(k=a.eq(b-1));b<a.length&&(e=a.eq(b));if(k&&k.type==3)f=k[0],h=f.nodeValue.length;e&&e.type==3&&(f=e[0],h=0);f&&(d?c.setStart(f,h):c.setEnd(f,h))}}var c=
this;a(c.startContainer,c.startOffset,!0);a(c.endContainer,c.endOffset,!1);return c},up:function(){function a(a,b,d){a.nodeType==3&&(b===0?d?c.setStartBefore(a):c.setEndBefore(a):b==a.nodeValue.length&&(d?c.setStartAfter(a):c.setEndAfter(a)))}var c=this;a(c.startContainer,c.startOffset,!0);a(c.endContainer,c.endOffset,!1);return c},enlarge:function(a){function c(c,d,k){c=i(c);if(!(c.type==3||La[c.name]||!a&&c.isBlock()))if(d===0){for(;!c.prev();){d=c.parent();if(!d||La[d.name]||!a&&d.isBlock())break;
c=d}k?b.setStartBefore(c[0]):b.setEndBefore(c[0])}else if(d==c.children().length){for(;!c.next();){d=c.parent();if(!d||La[d.name]||!a&&d.isBlock())break;c=d}k?b.setStartAfter(c[0]):b.setEndAfter(c[0])}}var b=this;b.up();c(b.startContainer,b.startOffset,!0);c(b.endContainer,b.endOffset,!1);return b},shrink:function(){for(var a,c=this.collapsed;this.startContainer.nodeType==1&&(a=this.startContainer.childNodes[this.startOffset])&&a.nodeType==1&&!i(a).isSingle();)this.setStart(a,0);if(c)return this.collapse(c);
for(;this.endContainer.nodeType==1&&this.endOffset>0&&(a=this.endContainer.childNodes[this.endOffset-1])&&a.nodeType==1&&!i(a).isSingle();)this.setEnd(a,a.childNodes.length);return this},createBookmark:function(a){var c,b=i('<span style="display:none;"></span>',this.doc)[0];b.id="__kindeditor_bookmark_start_"+Kb++ +"__";if(!this.collapsed)c=b.cloneNode(!0),c.id="__kindeditor_bookmark_end_"+Kb++ +"__";c&&this.cloneRange().collapse(!1).insertNode(c).setEndBefore(c);this.insertNode(b).setStartAfter(b);
return{start:a?"#"+b.id:b,end:c?a?"#"+c.id:c:null}},moveToBookmark:function(a){var c=this.doc,b=i(a.start,c),a=a.end?i(a.end,c):null;if(!b||b.length<1)return this;this.setStartBefore(b[0]);b.remove();a&&a.length>0?(this.setEndBefore(a[0]),a.remove()):this.collapse(!0);return this},dump:function(){console.log("--------------------");console.log(this.startContainer.nodeType==3?this.startContainer.nodeValue:this.startContainer,this.startOffset);console.log(this.endContainer.nodeType==3?this.endContainer.nodeValue:
this.endContainer,this.endOffset)}});i.RangeClass=aa;i.range=Sa;i.START_TO_START=sa;i.START_TO_END=ra;i.END_TO_END=oa;i.END_TO_START=ta;A(va,{init:function(a){var c=a.doc;this.doc=c;this.win=ja(c);this.sel=Ta(c);this.range=a},selection:function(a){var c=this.doc,b;b=Ta(c);var d;try{d=b.rangeCount>0?b.getRangeAt(0):b.createRange()}catch(e){}b=Y&&(!d||!d.item&&d.parentElement().ownerDocument!==c)?null:d;this.sel=Ta(c);if(b)return this.range=Sa(b),i(this.range.startContainer).name=="html"&&this.range.selectNodeContents(c.body).collapse(!1),
this;a&&this.range.selectNodeContents(c.body).collapse(!1);return this},select:function(a){var a=q(a,!0),c=this.sel,b=this.range.cloneRange().shrink(),d=b.startContainer,e=b.startOffset,k=ia(d),f=this.win,h,l=!1;if(a&&d.nodeType==1&&b.collapsed){if(Y){c=i("<span>&nbsp;</span>",k);b.insertNode(c[0]);h=k.body.createTextRange();try{h.moveToElementText(c[0])}catch(n){}h.collapse(!1);h.select();c.remove();f.focus();return this}if(ka&&(a=d.childNodes,i(d).isInline()||e>0&&i(a[e-1]).isInline()||a[e]&&i(a[e]).isInline()))b.insertNode(k.createTextNode("\u200b")),
l=!0}if(Y)try{h=b.get(!0),h.select()}catch(o){}else l&&b.collapse(!1),h=b.get(!0),c.removeAllRanges(),c.addRange(h),k!==document&&(b=i(h.endContainer).pos(),f.scrollTo(b.x,b.y));f.focus();return this},wrap:function(a){var c=this.range,b;b=i(a,this.doc);if(c.collapsed)return c.shrink(),c.insertNode(b[0]).selectNodeContents(b[0]),this;if(b.isBlock()){for(var d=a=b.clone(!0);d.first();)d=d.first();d.append(c.extractContents());c.insertNode(a[0]).selectNode(a[0]);return this}c.enlarge();var e=c.createBookmark(),
a=c.commonAncestor(),k=!1;i(a).scan(function(a){if(!k&&a==e.start)k=!0;else if(k){if(a==e.end)return!1;var c=i(a),d;a:{for(d=c;d&&d.name!="body";){if(Ma[d.name]||d.name=="div"&&d.hasClass("ke-script")){d=!0;break a}d=d.parent()}d=!1}if(!d&&c.type==3&&m(a.nodeValue).length>0){for(var f;(f=c.parent())&&f.isStyle()&&f.children().length==1;)c=f;f=b;f=f.clone(!0);if(c.type==3)Wa(f).append(c.clone(!1)),c.replaceWith(f);else{for(var a=c,h;(h=c.first())&&h.children().length==1;)c=h;h=c.first();for(c=c.doc.createDocumentFragment();h;)c.appendChild(h[0]),
h=h.next();h=a.clone(!0);d=Wa(h);for(var l=h,n=!1;f;){for(;l;)l.name===f.name&&(Qb(l,f.attr(),f.css()),n=!0),l=l.first();n||d.append(f.clone(!1));n=!1;f=f.first()}f=h;c.firstChild&&Wa(f).append(c);a.replaceWith(f)}}}});c.moveToBookmark(e);return this},split:function(a,c){for(var b=this.range,d=b.doc,e=b.cloneRange().collapse(a),k=e.startContainer,f=e.startOffset,h=k.nodeType==3?k.parentNode:k,l=!1,n;h&&h.parentNode;){n=i(h);if(c){if(!n.isStyle())break;if(!Ua(n,c))break}else if(La[n.name])break;l=
!0;h=h.parentNode}if(l)d=d.createElement("span"),b.cloneRange().collapse(!a).insertNode(d),a?e.setStartBefore(h.firstChild).setEnd(k,f):e.setStart(k,f).setEndAfter(h.lastChild),k=e.extractContents(),f=k.firstChild,l=k.lastChild,a?(e.insertNode(k),b.setStartAfter(l).setEndBefore(d)):(h.appendChild(k),b.setStartBefore(d).setEndBefore(f)),e=d.parentNode,e==b.endContainer&&(h=i(d).prev(),k=i(d).next(),h&&k&&h.type==3&&k.type==3?b.setEnd(h[0],h[0].nodeValue.length):a||b.setEnd(b.endContainer,b.endOffset-
1)),e.removeChild(d);return this},remove:function(a){var c=this.doc,b=this.range;b.enlarge();if(b.startOffset===0){for(var d=i(b.startContainer),e;(e=d.parent())&&e.isStyle()&&e.children().length==1;)d=e;b.setStart(d[0],0);d=i(b.startContainer);d.isBlock()&&Va(d,a);(d=d.parent())&&d.isBlock()&&Va(d,a)}if(b.collapsed){this.split(!0,a);c=b.startContainer;d=b.startOffset;if(d>0&&(e=i(c.childNodes[d-1]))&&pa(e))e.remove(),b.setStart(c,d-1);(d=i(c.childNodes[d]))&&pa(d)&&d.remove();pa(c)&&(b.startBefore(c),
c.remove());b.collapse(!0);return this}this.split(!0,a);this.split(!1,a);var k=c.createElement("span"),f=c.createElement("span");b.cloneRange().collapse(!1).insertNode(f);b.cloneRange().collapse(!0).insertNode(k);var l=[],n=!1;i(b.commonAncestor()).scan(function(a){if(!n&&a==k)n=!0;else{if(a==f)return!1;n&&l.push(a)}});i(k).remove();i(f).remove();c=b.startContainer;d=b.startOffset;e=b.endContainer;var o=b.endOffset;if(d>0){var m=i(c.childNodes[d-1]);m&&pa(m)&&(m.remove(),b.setStart(c,d-1),c==e&&b.setEnd(e,
o-1));if((d=i(c.childNodes[d]))&&pa(d))d.remove(),c==e&&b.setEnd(e,o-1)}(c=i(e.childNodes[b.endOffset]))&&pa(c)&&c.remove();c=b.createBookmark(!0);h(l,function(c,b){Va(i(b),a)});b.moveToBookmark(c);return this},commonNode:function(a){function c(c){for(var b=c;c;){if(Ua(i(c),a))return i(c);c=c.parentNode}for(;b&&(b=b.lastChild);)if(Ua(i(b),a))return i(b);return null}var b=this.range,d=b.endContainer,b=b.endOffset,e=d.nodeType==3||b===0?d:d.childNodes[b-1],k=c(e);if(k)return k;if(e.nodeType==1||d.nodeType==
3&&b===0)if(d=i(e).prev())return c(d);return null},commonAncestor:function(a){function c(c){for(;c;){if(c.nodeType==1&&c.tagName.toLowerCase()===a)return c;c=c.parentNode}return null}var b=this.range,d=b.startContainer,e=b.startOffset,k=b.endContainer,b=b.endOffset,k=k.nodeType==3||b===0?k:k.childNodes[b-1],d=c(d.nodeType==3||e===0?d:d.childNodes[e-1]),e=c(k);if(d&&e&&d===e)return i(d);return null},state:function(a){var c=this.doc,b=!1;try{b=c.queryCommandState(a)}catch(d){}return b},val:function(a){var c=
this.doc,a=a.toLowerCase(),b="";if(a==="fontfamily"||a==="fontname")return b=pb(c,"fontname"),b=b.replace(/['"]/g,""),b.toLowerCase();if(a==="formatblock"){b=pb(c,a);if(b===""&&(a=this.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"})))b=a.name;b==="Normal"&&(b="p");return b.toLowerCase()}if(a==="fontsize")return(a=this.commonNode({"*":".font-size"}))&&(b=a.css("font-size")),b.toLowerCase();if(a==="forecolor")return(a=this.commonNode({"*":".color"}))&&(b=a.css("color")),b=r(b),b===""&&(b="default"),
b.toLowerCase();if(a==="hilitecolor")return(a=this.commonNode({"*":".background-color"}))&&(b=a.css("background-color")),b=r(b),b===""&&(b="default"),b.toLowerCase();return b},toggle:function(a,c){this.commonNode(c)?this.remove(c):this.wrap(a);return this.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",
{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(a){return this.wrap('<span style="color:'+a+';"></span>').select()},hilitecolor:function(a){return this.wrap('<span style="background-color:'+a+';"></span>').select()},fontsize:function(a){return this.wrap('<span style="font-size:'+a+';"></span>').select()},fontname:function(a){return this.fontfamily(a)},fontfamily:function(a){return this.wrap('<span style="font-family:'+
a+';"></span>').select()},removeformat:function(){var a={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"};h(Gb,function(c){a[c]="*"});this.remove(a);return this.select()},inserthtml:function(a,c){function b(a,c){var c='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+c,d=a.get();d.item?d.item(0).outerHTML=c:d.pasteHTML(c);var g=a.doc.getElementById("__kindeditor_temp_tag__");g.parentNode.removeChild(g);d=
ob(d);a.setEnd(d.endContainer,d.endOffset);a.collapse(!1);e.select(!1)}function d(a,c){var b=a.doc,g=b.createDocumentFragment();i("@"+c,b).each(function(){g.appendChild(this)});a.deleteContents();a.insertNode(g);a.collapse(!1);e.select(!1)}var e=this,k=e.range;if(a==="")return e;if(Y&&c){try{b(k,a)}catch(f){d(k,a)}return e}d(k,a);return e},hr:function(){return this.inserthtml("<hr />")},print:function(){this.win.print();return this},insertimage:function(a,c,b,d,e,i){c=q(c,"");q(e,0);a='<img src="'+
s(a)+'" data-ke-src="'+s(a)+'" ';b&&(a+='width="'+s(b)+'" ');d&&(a+='height="'+s(d)+'" ');c&&(a+='title="'+s(c)+'" ');i&&(a+='align="'+s(i)+'" ');a+='alt="'+s(c)+'" ';a+="/>";return this.inserthtml(a)},createlink:function(a,c){function b(a,c,d){i(a).attr("href",c).attr("data-ke-src",c);d?i(a).attr("target",d):i(a).removeAttr("target")}var d=this.doc,e=this.range;this.select();var k=this.commonNode({a:"*"});k&&!e.isControl()&&(e.selectNode(k.get()),this.select());k='<a href="'+s(a)+'" data-ke-src="'+
s(a)+'" ';c&&(k+=' target="'+s(c)+'"');if(e.collapsed)return k+=">"+s(a)+"</a>",this.inserthtml(k);if(e.isControl()){var f=i(e.startContainer.childNodes[e.startOffset]);k+="></a>";f.after(i(k,d));f.next().append(f);e.selectNode(f[0]);return this.select()}var k=e.startContainer,f=e.startOffset,h=e.endContainer,e=e.endOffset;if(k.nodeType==1&&k===h&&f+1===e&&(e=k.childNodes[f],e.nodeName.toLowerCase()=="a"))return b(e,a,c),this;ea(d,"createlink","__kindeditor_temp_url__");i('a[href="__kindeditor_temp_url__"]',
d).each(function(){b(this,a,c)});return this},unlink:function(){var a=this.doc,c=this.range;this.select();if(c.collapsed){var b=this.commonNode({a:"*"});b&&(c.selectNode(b.get()),this.select());ea(a,"unlink",null);ka&&i(c.startContainer).name==="img"&&(a=i(c.startContainer).parent(),a.name==="a"&&a.remove(!0))}else ea(a,"unlink",null);return this}});h("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),
function(a,c){va.prototype[c]=function(a){this.select();ea(this.doc,c,a);Y&&e(c,"justifyleft,justifycenter,justifyright,justifyfull".split(","))>=0&&this.selection();(!Y||e(c,"formatblock,selectall,insertorderedlist,insertunorderedlist".split(","))>=0)&&this.selection();return this}});h("cut,copy,paste".split(","),function(a,c){va.prototype[c]=function(){if(!this.doc.queryCommandSupported(c))throw"not supported";this.select();ea(this.doc,c,null);return this}});i.CmdClass=va;i.cmd=tb;A(ga,{init:function(a){var c=
this;c.name=a.name||"";c.doc=a.doc||document;c.win=ja(c.doc);c.x=o(a.x);c.y=o(a.y);c.z=a.z;c.width=o(a.width);c.height=o(a.height);c.div=i('<div style="display:block;"></div>');c.options=a;c._alignEl=a.alignEl;c.width&&c.div.css("width",c.width);c.height&&c.div.css("height",c.height);c.z&&c.div.css({position:"absolute",left:c.x,top:c.y,"z-index":c.z});c.z&&(c.x===d||c.y===d)&&c.autoPos(c.width,c.height);a.cls&&c.div.addClass(a.cls);a.shadowMode&&c.div.addClass("ke-shadow");a.css&&c.div.css(a.css);
a.src?i(a.src).replaceWith(c.div):i(c.doc.body).append(c.div);a.html&&c.div.html(a.html);if(a.autoScroll)if(F&&N<7||da){var b=na();i(c.win).bind("scroll",function(){var a=na(),d=a.x-b.x,a=a.y-b.y;c.pos(l(c.x)+d,l(c.y)+a,!1)})}else c.div.css("position","fixed")},pos:function(a,c,b){b=q(b,!0);if(a!==null&&(a=a<0?0:o(a),this.div.css("left",a),b))this.x=a;if(c!==null&&(c=c<0?0:o(c),this.div.css("top",c),b))this.y=c;return this},autoPos:function(a,c){var b=l(a)||0,d=l(c)||0,e=na();if(this._alignEl){var k=
i(this._alignEl),f=k.pos(),b=fa(k[0].clientWidth/2-b/2),d=fa(k[0].clientHeight/2-d/2);x=b<0?f.x:f.x+b;y=d<0?f.y:f.y+d}else f=X(this.doc),x=fa(e.x+(f.clientWidth-b)/2),y=fa(e.y+(f.clientHeight-d)/2);F&&N<7||da||(x-=e.x,y-=e.y);return this.pos(x,y)},remove:function(){var a=this;(F&&N<7||da)&&i(a.win).unbind("scroll");a.div.remove();h(a,function(c){a[c]=null});return this},show:function(){this.div.show();return this},hide:function(){this.div.hide();return this},draggable:function(a){var c=this,a=a||
{};a.moveEl=c.div;a.moveFn=function(a,b,d,e,i,f){if((a+=i)<0)a=0;if((b+=f)<0)b=0;c.pos(a,b)};Xa(a);return c}});i.WidgetClass=ga;i.widget=Za;var $a="";if(J=document.getElementsByTagName("html"))$a=J[0].dir;A(xa,ga,{init:function(a){function c(){var c=Ya(b.iframe);c.open();if(h)c.domain=document.domain;c.write(Rb(d,e,k,f));c.close();b.win=b.iframe[0].contentWindow;b.doc=c;var l=tb(c);b.afterChange(function(){l.selection()});ka&&i(c).click(function(a){i(a.target).name==="img"&&(l.selection(!0),l.range.selectNode(a.target),
l.select())});if(F)b._mousedownHandler=function(){var a=l.range.cloneRange();a.shrink();a.isControl()&&b.blur()},i(document).mousedown(b._mousedownHandler),i(c).keydown(function(a){if(a.which==8){l.selection();var c=l.range;c.isControl()&&(c.collapse(!0),i(c.startContainer.childNodes[c.startOffset]).remove(),a.preventDefault())}});b.cmd=l;b.html(wa(b.srcElement));F?(c.body.disabled=!0,c.body.contentEditable=!0,c.body.removeAttribute("disabled")):c.designMode="on";a.afterCreate&&a.afterCreate.call(b)}
var b=this;xa.parent.init.call(b,a);b.srcElement=i(a.srcElement);b.div.addClass("ke-edit");b.designMode=q(a.designMode,!0);b.beforeGetHtml=a.beforeGetHtml;b.beforeSetHtml=a.beforeSetHtml;b.afterSetHtml=a.afterSetHtml;var d=q(a.themesPath,""),e=a.bodyClass,k=a.cssPath,f=a.cssData,h=location.protocol!="res:"&&location.host.replace(/:\d+/,"")!==document.domain,l="document.open();"+(h?'document.domain="'+document.domain+'";':"")+"document.close();",l=F?' src="javascript:void(function(){'+encodeURIComponent(l)+
'}())"':"";b.iframe=i('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+l+"></iframe>").css("width","100%");b.textarea=i('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%");b.tabIndex=isNaN(parseInt(a.tabIndex,10))?b.srcElement.attr("tabindex"):parseInt(a.tabIndex,10);b.iframe.attr("tabindex",b.tabIndex);b.textarea.attr("tabindex",b.tabIndex);b.width&&b.setWidth(b.width);b.height&&b.setHeight(b.height);b.designMode?b.textarea.hide():b.iframe.hide();
h&&b.iframe.bind("load",function(){b.iframe.unbind("load");F?c():setTimeout(c,0)});b.div.append(b.iframe);b.div.append(b.textarea);b.srcElement.hide();!h&&c()},setWidth:function(a){this.width=a=o(a);this.div.css("width",a);return this},setHeight:function(a){this.height=a=o(a);this.div.css("height",a);this.iframe.css("height",a);if(F&&N<8||da)a=o(l(a)-2);this.textarea.css("height",a);return this},remove:function(){var a=this.doc;i(a.body).unbind();i(a).unbind();i(this.win).unbind();this._mousedownHandler&&
i(document).unbind("mousedown",this._mousedownHandler);wa(this.srcElement,this.html());this.srcElement.show();a.write("");this.iframe.unbind();this.textarea.unbind();xa.parent.remove.call(this)},html:function(a,c){var b=this.doc;if(this.designMode){b=b.body;if(a===d)return a=c?"<!doctype html><html>"+b.parentNode.innerHTML+"</html>":b.innerHTML,this.beforeGetHtml&&(a=this.beforeGetHtml(a)),la&&a=="<br />"&&(a=""),a;this.beforeSetHtml&&(a=this.beforeSetHtml(a));F&&N>=9&&(a=a.replace(/(<.*?checked=")checked(".*>)/ig,
"$1$2"));i(b).html(a);this.afterSetHtml&&this.afterSetHtml();return this}if(a===d)return this.textarea.val();this.textarea.val(a);return this},design:function(a){if(a===d?!this.designMode:a){if(!this.designMode)a=this.html(),this.designMode=!0,this.html(a),this.textarea.hide(),this.iframe.show()}else if(this.designMode)a=this.html(),this.designMode=!1,this.html(a),this.iframe.hide(),this.textarea.show();return this.focus()},focus:function(){this.designMode?this.win.focus():this.textarea[0].focus();
return this},blur:function(){if(F){var a=i('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',this.div);this.div.append(a);a[0].focus();a.remove()}else this.designMode?this.win.blur():this.textarea[0].blur();return this},afterChange:function(a){function c(c){setTimeout(function(){a(c)},1)}var b=this.doc,d=b.body;i(b).keyup(function(c){!c.ctrlKey&&!c.altKey&&eb[c.which]&&a(c)});i(b).mouseup(a).contextmenu(a);i(this.win).blur(a);i(d).bind("paste",c);i(d).bind("cut",
c);return this}});i.EditClass=xa;i.edit=ub;i.iframeDoc=Ya;A(Ga,ga,{init:function(a){function c(a){a=i(a);if(a.hasClass("ke-outline"))return a;if(a.hasClass("ke-toolbar-icon"))return a.parent()}function b(a,d){var g=c(a.target);if(g&&!g.hasClass("ke-disabled")&&!g.hasClass("ke-selected"))g[d]("ke-on")}var d=this;Ga.parent.init.call(d,a);d.disableMode=q(a.disableMode,!1);d.noDisableItemMap=z(q(a.noDisableItems,[]));d._itemMap={};d.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(a){a.preventDefault()}).attr("unselectable",
"on");d.div.mouseover(function(a){b(a,"addClass")}).mouseout(function(a){b(a,"removeClass")}).click(function(a){var b=c(a.target);b&&!b.hasClass("ke-disabled")&&d.options.click.call(this,a,b.attr("data-name"))})},get:function(a){if(this._itemMap[a])return this._itemMap[a];return this._itemMap[a]=i("span.ke-icon-"+a,this.div).parent()},select:function(a){vb.call(this,a,function(a){a.addClass("ke-selected")});return self},unselect:function(a){vb.call(this,a,function(a){a.removeClass("ke-selected").removeClass("ke-on")});
return self},enable:function(a){if(a=a.get?a:this.get(a))a.removeClass("ke-disabled"),a.opacity(1);return this},disable:function(a){if(a=a.get?a:this.get(a))a.removeClass("ke-selected").addClass("ke-disabled"),a.opacity(0.5);return this},disableAll:function(a,c){var b=this,e=b.noDisableItemMap;c&&(e=z(c));(a===d?!b.disableMode:a)?(i("span.ke-outline",b.div).each(function(){var a=i(this),c=a[0].getAttribute("data-name",2);e[c]||b.disable(a)}),b.disableMode=!0):(i("span.ke-outline",b.div).each(function(){var a=
i(this),c=a[0].getAttribute("data-name",2);e[c]||b.enable(a)}),b.disableMode=!1);return b}});i.ToolbarClass=Ga;i.toolbar=wb;A(ya,ga,{init:function(a){a.z=a.z||811213;ya.parent.init.call(this,a);this.centerLineMode=q(a.centerLineMode,!0);this.div.addClass("ke-menu").bind("click,mousedown",function(a){a.stopPropagation()}).attr("unselectable","on")},addItem:function(a){if(a.title==="-")this.div.append(i('<div class="ke-menu-separator"></div>'));else{var c=i('<div class="ke-menu-item" unselectable="on"></div>'),
b=i('<div class="ke-inline-block ke-menu-item-left"></div>'),d=i('<div class="ke-inline-block ke-menu-item-right"></div>'),e=o(a.height),f=q(a.iconClass,"");this.div.append(c);e&&(c.css("height",e),d.css("line-height",e));var h;this.centerLineMode&&(h=i('<div class="ke-inline-block ke-menu-item-center"></div>'),e&&h.css("height",e));c.mouseover(function(){i(this).addClass("ke-menu-item-on");h&&h.addClass("ke-menu-item-center-on")}).mouseout(function(){i(this).removeClass("ke-menu-item-on");h&&h.removeClass("ke-menu-item-center-on")}).click(function(c){a.click.call(i(this));
c.stopPropagation()}).append(b);h&&c.append(h);c.append(d);a.checked&&(f="ke-icon-checked");f!==""&&b.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+f+'"></span>');d.html(a.title);return this}},remove:function(){this.options.beforeRemove&&this.options.beforeRemove.call(this);i(".ke-menu-item",this.div[0]).unbind();ya.parent.remove.call(this);return this}});i.MenuClass=ya;i.menu=ab;A(za,ga,{init:function(a){a.z=a.z||811213;za.parent.init.call(this,a);var c=a.colors||[["#E53333",
"#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]];this.selectedColor=(a.selectedColor||"").toLowerCase();this._cells=[];this.div.addClass("ke-colorpicker").bind("click,mousedown",function(a){a.stopPropagation()}).attr("unselectable","on");a=this.doc.createElement("table");this.div.append(a);a.className="ke-colorpicker-table";
a.cellPadding=0;a.cellSpacing=0;a.border=0;var b=a.insertRow(0),d=b.insertCell(0);d.colSpan=c[0].length;this._addAttr(d,"","ke-colorpicker-cell-top");for(var e=0;e<c.length;e++)for(var b=a.insertRow(e+1),i=0;i<c[e].length;i++)d=b.insertCell(i),this._addAttr(d,c[e][i],"ke-colorpicker-cell")},_addAttr:function(a,c,b){var d=this,a=i(a).addClass(b);d.selectedColor===c.toLowerCase()&&a.addClass("ke-colorpicker-cell-selected");a.attr("title",c||d.options.noColor);a.mouseover(function(){i(this).addClass("ke-colorpicker-cell-on")});
a.mouseout(function(){i(this).removeClass("ke-colorpicker-cell-on")});a.click(function(a){a.stop();d.options.click.call(i(this),c)});c?a.append(i('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",c)):a.html(d.options.noColor);i(a).attr("unselectable","on");d._cells.push(a)},remove:function(){h(this._cells,function(){this.unbind()});za.parent.remove.call(this);return this}});i.ColorPickerClass=za;i.colorpicker=xb;A(bb,{init:function(a){var c=i(a.button),b=a.fieldName||
"file",d=a.url||"",e=c.val(),f=a.extraParams||{},h=c[0].className||"",l=a.target||"kindeditor_upload_i